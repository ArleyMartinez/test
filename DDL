CREATE DATABASE Emprendimiento;


DROP TABLE IF EXISTS tab_emprendimiento;
DROP TABLE IF EXISTS tab_docente;
DROP TABLE IF EXISTS tab_aprendiz;
DROP TABLE IF EXISTS tab_informes;
DROP TABLE IF EXISTS tab_avance;
DROP TABLE IF EXISTS tab_consultas;
DROP TABLE IF EXISTS tab_asesor;
DROP TABLE IF EXISTS tab_proyectos;
DROP TABLE IF EXISTS tab_preinscritos;

CREATE TABLE tab_emprendimiento
(
nit_empre		INTEGER		NOT NULL,
direccion	VARCHAR		NOT NULL,
telefono	INTEGER		NOT NULL,
correo		VARCHAR		NOT NULL,
PRIMARY KEY(nit_empre)
);


CREATE TABLE tab_docente
(
id_docente		INTEGER		NOT NULL,
nit_empre		VARCHAR		NOT NULL,
id_apren	INTEGER		NOT NULL,
nombre VARCHAR NOT NULL,
telefono	VARCHAR		NOT NULL,
correo		VARCHAR		NOT NULL,
PRIMARY KEY(id_docente)
FOREIGN KEY (nit_empre) REFERENCES tab_emprendimiento,
FOREIGN KEY (id_apren) REFERENCES tab_aprendiz,
);


CREATE TABLE tab_aprendiz
(
id_apren INTEGER NOT NULL,
id_docente INTEGER NOT NULL,
id_asesor INTEGER NOT NULL,
nombre VARCHAR NOT NULL,
telefono	VARCHAR		NOT NULL,
correo		VARCHAR		NOT NULL,
ficha     VARCHAR NOT NULL,
PRIMARY KEY(id_apren)
FOREIGN KEY (id_docente) REFERENCES tab_docente,
FOREIGN KEY (id_asesor) REFERENCES tab_asesor,
);

CREATE TABLE tab_informes
(
num_infor INTEGER NOT NULL,
id_docente INTEGER NOT NULL,
tipo_informe VARCHAR NOT NULL,
PRIMARY KEY(num_infor)
FOREIGN KEY (id_docente) REFERENCES tab_docente,
);


CREATE TABLE tab_avance
(
num_avan INTEGER NOT NULL,
id_apren INTEGER NOT NULL,
fecha DATE NOT NULL,
PRIMARY KEY(num_avan)
FOREIGN KEY (id_apren) REFERENCES tab_aprendiz,
);


CREATE TABLE tab_consulta
(
id_consu INTEGER NOT NULL,
id_apren INTEGER NOT NULL,
id_docente INTEGER NOT NULL,
tipo_consu VARCHAR NOT NULL,
PRIMARY KEY(id_consu)
FOREIGN KEY (id_apren) REFERENCES tab_aprendiz,
FOREIGN KEY (id_docente) REFERENCES tab_docente,
);


CREATE TABLE tab_asesor
(
id_asesor INTEGER NOT NULL,
id_apren VARCHAR NOT NULL,
nombre VARCHAR NOT NULL,
telefono	VARCHAR		NOT NULL,
correo		VARCHAR		NOT NULL,
PRIMARY KEY(id_asesor)
FOREIGN KEY (id_apren) REFERENCES tab_aprendiz,
);


CREATE TABLE tab_proyectos
(
id_proye INTEGER NOT NULL,
nit_empre VARCHAR NOT NULL,
nombre VARCHAR NOT NULL,
telefono	VARCHAR		NOT NULL,
correo		VARCHAR		NOT NULL,
tipo_proy VARCHAR NOT NULL,
estado BOOLEAN NOT NULL,
PRIMARY KEY(id_proye)
FOREIGN KEY (nit_empre) REFERENCES tab_emprendimiento,
FOREIGN KEY (id_apren) REFERENCES tab_aprendiz,
);

CREATE TABLE tab_preinscritos
(
num_prein INTEGER NOT NULL,
nit_empre VARCHAR NOT NULL,
nombre VARCHAR NOT NULL,
telefono	VARCHAR		NOT NULL,
correo		VARCHAR		NOT NULL,
PRIMARY KEY(id_proye)
FOREIGN KEY (nit_empre) REFERENCES tab_emprendimiento,
);
